

@TRAIN_MAIN
    #DIM MEMO_MASTER
    #DIM MEMO_TARGET

    MEMO_MASTER = MASTER
    MEMO_TARGET = TARGE

    CALL TRAIN_FTF
    ;CALL LVUP

    MASTER = MEMO_MASTER
    TARGET = MEMO_TARGET


@TRAIN_FTF


    $TRAIN_LOOP
    ;CALL TRAIN_UI
    ;CALL UPDATE_PRINT_PALAM(ARG)
    ;CALL COMABLE_UI
    INPUT
    TRYCALLFORM COM{RESULT}
    CALL SOURCE_CHECK_MAIN
    ;GOTO TRAIN_LOOP

@EVENTTRAIN

@SHOW_USERCOM
    CALL PRINT_LINE(2)
    PRINTC 能力显示 [2001]
    PRINTC 状态显示 [2002]
    SIF TFLAG:303 == 0
        PRINTC 连发切换 [2003]
    SIF TFLAG:303 == 1
        PRINTC 单发切换 [2003]
    
    PRINTC 结束调教 [2099]
    CALL PRINT_LINE(3)

@TRAIN_UI
    #DIM LCOUNT
    #DIM C_NO
    CALL DRAWLINES_CENTER("【 调教中 】")
    PRINTFORML 第{DAY}天 {FLAG:3}时{FLAG:4}分 所在地:{CFLAG}
    PRINTFORML 自机: %NAME:MASTER%
    PRINTL
	CALL PRINT_BAR(BASE:MASTER:体力,MAXBASE:MASTER:体力, 10, COLOR("体力"))
	PRINTFORML ({BASE:MASTER:体力}/{MAXBASE:MASTER:体力})
    CALL PRINT_BAR(BASE:MASTER:理智,MAXBASE:MASTER:理智, 10, COLOR("理智"))
	PRINTFORML ({BASE:MASTER:理智}/{MAXBASE:MASTER:理智})
    CALL PRINT_BAR(BASE:MASTER:精力,MAXBASE:MASTER:精力, 10, COLOR("精力"))
	PRINTFORML ({BASE:MASTER:精力}/{MAXBASE:MASTER:精力})
    CALL PRINT_BAR(BASE:MASTER:性欲,MAXBASE:MASTER:性欲, 10, COLOR("性欲"))
	PRINTFORML ({BASE:MASTER:性欲}/{MAXBASE:MASTER:性欲})
    CALL TRAIN_CLOTHE_STATUS(MASTER)
    CALL UPDATE_PRINT_PALAM(MASTER)

    CUSTOMDRAWLINE -
    SIF TFLAG:忍耐中 == 0
        PRINTBUTTON "[忍耐指示]", 2051
    SIF TFLAG:忍耐中 == 1
        PRINTBUTTON "[解放指示]", 2051
    SIF TFLAG:寸止中 == 0
        PRINTBUTTON "[寸止挑逗]", 2052
    SIF TFLAG:寸止中 == 1
        PRINTBUTTON "[停止挑逗]", 2052
    CALL PRINT_LINE(2)


@UPDATE_PRINT_PALAM(ARG)
    #DIM LCOUNT
    #DIM BAR_SIZE
    #DIM BAR_MAX
    #DIM BAR_COLOUR
    #DIM PALAM_MAX
    #DIM PCOUNT
    #DIM EX_LEVEL
    PCOUNT = 0
    BAR_SIZE = 5
    BAR_COLOUR = 0x6666FF
    PRINTL 【 快感 】
    FOR LCOUNT, 101, 111
        SELECTCASE PALAM:LCOUNT
            CASE IS >= 200000
                EX_LEVEL = 5
                PALAM_MAX = PALAM:LCOUNT + 1
            CASE IS >= 100000
                EX_LEVEL = 4
                PALAM_MAX = 200000
            CASE IS >= 50000
                EX_LEVEL = 3
                PALAM_MAX = 100000
            CASE IS >= 20000
                EX_LEVEL = 2
                PALAM_MAX = 50000
            CASE IS >= 10000
                EX_LEVEL = 1
                PALAM_MAX = 20000
            CASE IS < 10000
                EX_LEVEL = 0
                PALAM_MAX = 10000
        ENDSELECT
        IF PALAMNAME:LCOUNT != ""
	        PRINTFORM %PALAMNAME:(LCOUNT-100)%LV:{EX_LEVEL}

	        CALL PRINT_BAR(PALAM:ARG:LCOUNT, PALAM_MAX, BAR_SIZE, BAR_COLOUR)
            PCOUNT += 1
            IF PCOUNT >= 3
                PRINTL
                PCOUNT = 0
            ENDIF
        ENDIF
    NEXT
    CALL PRINT_LINE(2)


@TRAIN_CLOTHE_STATUS(ARG)
    #DIM C_NO
    #DIM LCOUNT
    FOR LCOUNT, 1102, 1110
        C_NO += CFLAG:ARG:LCOUNT
    NEXT
    IF C_NO == 0
        PRINT [裸体]
    ELSEIF C_NO > 1
        SIF GET_STR_CLOTHE("风衣",ARG) != "无"
            PRINTFORM [%GET_STR_CLOTHE("风衣",ARG)%]
        SIF GET_STR_CLOTHE("外套",ARG) != "无"
            PRINTFORM [%GET_STR_CLOTHE("外套",ARG)%]
        PRINTFORM [%GET_STR_CLOTHE("内衣",ARG)%]
        SIF GET_STR_CLOTHE("手套",ARG) != "无"
            PRINTFORM [%GET_STR_CLOTHE("手套",ARG)%]
        PRINTFORM [%GET_STR_CLOTHE("内裤",ARG)%]
        SIF GET_STR_CLOTHE("裙裤",ARG) != "无"
            PRINTFORM [%GET_STR_CLOTHE("裙裤",ARG)%]
        SIF GET_STR_CLOTHE("袜子",ARG) != "无"
            PRINTFORM [%GET_STR_CLOTHE("袜子",ARG)%]
        SIF GET_STR_CLOTHE("鞋子",ARG) != "无"
            PRINTFORM [%GET_STR_CLOTHE("鞋子",ARG)%]
    ENDIF
    PRINTL