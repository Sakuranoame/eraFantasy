@GETJUEL_SOURCE ;珠打印
	#DIM NUM
	#DIM LCOUNT
	#DIM PALAMCOUNT = 0
	VARSET LOCAL, 0

	FOR LCOUNT, 0, 26
		NUM = PALAMLIST:LCOUNT
		LOCAL = UP:NUM
		GOTJUEL:NUM = LOCAL
		PALAMCOUNT += LOCAL
	NEXT

	DRAWLINE
	IF PALAMCOUNT > 0;
		CALL SHOW_AND_GET_GOTJUEL
	ENDIF
	
@SHOW_AND_GET_GOTJUEL
	#DIM BEFORE_JUEL
	#DIM LCOUNT
	LOCAL = 0
	PRINTL 获得珠:
	FOR LCOUNT, 0 ,26
		LOCAL = PALAMLIST:LCOUNT
		IF JUEL:LOCAL >= 9999999
			GOTJUEL:LOCAL = 9999999
		ELSEIF (JUEL:LOCAL + GOTJUEL:LOCAL) >= 9999999
			GOTJUEL:LOCAL = 9999999 - JUEL:LOCAL
		ENDIF

		BEFORE_JUEL = JUEL:TARGET:LOCAL
		GOTJUEL:LOCAL = MAX(GOTJUEL:LOCAL, 0)

		JUEL:LOCAL = LIMIT(JUEL:LOCAL + GOTJUEL:LOCAL, 0, 9999999)

		SIF JUEL:LOCAL + GOTJUEL:LOCAL != 0
			PRINTFORML %PALAMNAME:LOCAL%之珠x({BEFORE_JUEL, 7} \@(GOTJUEL:LOCAL >= 0) ? ＋ # －　\@ {ABS(GOTJUEL:LOCAL), 7} ＝　{JUEL:LOCAL, 7})
NEXT

@PALAM_UP
	#DIM LCOUNT
	#DIM NUM
	FOR LCOUNT, 0, 26
		NUM = PALAMLIST:LCOUNT
		PALAM:NUM += GOTJUEL:NUM
	NEXT


;@CALC_JUEL(ARG)
